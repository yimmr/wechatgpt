使用 `NodeJS + mongodb + Docker` 搭建的微信公众号 **ChatGPT** 聊天服务

# 当前项目处于内测状态

此文档简单后续更新再补充，有问题可 Q 我 160865627

# 环境要求

服务器需要安装 Docker，并且 `docker compose` 命令可用。

# 用法

1. 复制 `.env.example` 文件并改名为 `.env`，此文件填写重要的环境变量信息，如密匙、token、数据库账户等等
2. 填好必要内容后启动服务：，在项目目录下执行命令 `docker compose up -d`
3. 一些设置可以到 `config` 目录下的文件中修改，修改后需要重启服务

# 订阅号延迟问题

被动回复消息接口限 5 秒内应答，未应答会发起重试，因此程序最多有 14.5s 的处理时间，超时则回复一条消息让用户等一会再重发消息。
不设置为 15s 超时是因为响应可能有延迟，导致公现众号出故障的提示。

# 用户

为了节省令牌，程序加了以下限制：

1. 设置用户每天消耗的令牌数
2. 用户可购买令牌数，不再按天限制
3. 限制提问的内容长度

# openai

这个暂时没有实现

1. 限制同时进行的任务数
2. 设置请求间隔时间
